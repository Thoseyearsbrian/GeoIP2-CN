# **GeoIP2-CN: Auto Build and Update Solution**

<p align="center">
  <img src="https://img.shields.io/badge/License-MIT-green.svg" alt="License" />
  <img src="https://github.com/Thoseyearsbrian/GeoIP2-CN/actions/workflows/update.yml/badge.svg" alt="GeoIP Auto Update Status" />
  <img src="https://img.shields.io/github/stars/Thoseyearsbrian/GeoIP2-CN?style=social" alt="GitHub stars" />
  <img src="https://img.shields.io/github/v/release/Thoseyearsbrian/GeoIP2-CN?include_prereleases&label=version" alt="Version" />
  <img src="https://img.shields.io/github/last-commit/Thoseyearsbrian/GeoIP2-CN" alt="Last Commit" />
</p>

This project provides scripts and configurations to automatically download and build the official GeoLite2-Country.mmdb database from MaxMind. It is designed to offer trusted, self-hosted, and regularly updated geolocation support for network tools such as Surge, Clash, and QuantumultX.

## **Project Background**

GeoIP databases are widely used in network security and traffic routing to determine IP location and assist with smart routing or access control. Many current projects rely on third-party distribution sources, which introduce potential risks:

- **Lack of trust chain**: Non-official sources cannot be audited and may be tampered with;
- **Poor maintainability**: Sources may become unavailable without notice;
- **Outdated data**: Updates may be delayed or irregular.

To address these issues, this project implements a fully self-controlled update mechanism, ensuring the data source is official from MaxMind, structurally traceable, update-controllable, and logically auditable. It is optimized for use in Surge, Clash, and similar tools.

## **Project Advantages**

- **Official Data Source:** All data is directly fetched from MaxMind, ensuring trust and security;
- **Automated Updates:** GitHub Actions pulls the latest data every 3 days to maintain synchronization;
- **License Compliance:** The project uses GitHub Actions to fetch MaxMind data in accordance with the [GeoLite2 EULA](https://www.maxmind.com/en/geolite2/eula). Users are advised to apply for their own License Key to ensure legal, secure, and traceable data usage.
- **Customizable & Controllable:** Users can configure output paths, update frequency, target branches, and other parameters to suit their specific deployment needs.

### **Automated Updates**

This project utilizes GitHub Actions for scheduled updates, pulling the latest database every 3 days. No manual intervention is required.

## **File Path**

| **Filename** | **Build Output Path (for reference only)**                   | **Example Usage**                                        |
| ------------ | ------------------------------------------------------------ | -------------------------------------------------------- |
| Country.mmdb | [data/Country.mmdb](https://raw.githubusercontent.com/Thoseyearsbrian/GeoIP2-CN/main/data/GeoLite2-Country.mmdb) | Used in Surge, Clash, QuantumultX for identifying CN IPs |

## **Configuration Guide**

Copy the file URL ‚Üí Open Surge ‚Üí Go to General ‚Üí GeoIP Database ‚Üí Remove previous configuration (if any) ‚Üí Paste the new URL ‚Üí Update Now ‚Üí Apply ‚Üí Done!

<p align="center">
  <img src="https://raw.githubusercontent.com/Thoseyearsbrian/GeoIP2-CN/main/Icons/Groups/surge-geoip-config-guide-step-by-step.png" width="600">
</p>

## **‚ö†Ô∏è Important Notes**

1. **Disable or remove any rules related to CN IP ranges:**

```
RULE-SET,https://raw.githubusercontent.com/Thoseyearsbrian/Aegis/main/SurgeAegis/rules/China.list,DIRECT # Remove this
GEOIP,CN,DIRECT # Also avoid using this with the above line
```

2.The GEOIP,CN,DIRECT rule should be placed **just above the final rule** to ensure correct evaluation order:

```
# ... other rules ...
GEOIP,CN,DIRECT # Place here
FINAL,REJECT
```

3.Do **not use GEOIP rules for countries other than China, as this database only contains **China mainland IP segments**:

```
GEOIP,US,PROXY # Incorrect ‚Äì will not match
GEOIP,AU,PROXY # Incorrect ‚Äì will not match
GEOIP,HK,PROXY # Incorrect ‚Äì will not match
GEOIP,CN,DIRECT # Correct
```

## **üîê Disclaimer**

The .mmdb file generated by this project is intended **for testing and educational purposes only**. It must **not be used for any form of commercial use**.

Users are solely responsible for ensuring compliance with the [MaxMind GeoLite2 EULA](https://www.maxmind.com/en/geolite2/eula) and applicable laws and regulations. **This project accepts no legal liability for any use of the data.**

This project **only provides the logic and scripts for building the database** and does not distribute original MaxMind data. Users are strongly advised to apply for their own License Key directly from MaxMind.

This project is **intended for developers with a technical background and awareness of licensing requirements**.

## **üèÖ License Notice**

- The .mmdb file built through this project is for research and educational use only. Please read and comply with the [MaxMind EULA](https://www.maxmind.com/en/geolite2/eula). **This project assumes no responsibility for your use case.**

- This project uses GitHub Actions to automatically pull data from MaxMind. **You must register on MaxMind and obtain your own License Key** to run the build script or automation legally.
- GeoLite2 data is copyrighted by [MaxMind, Inc.](https://www.maxmind.com/) and is licensed under the [GeoLite2 EULA](https://www.maxmind.com/en/geolite2/eula).
- All scripts and configurations in this project are released under the [MIT License](https://raw.githubusercontent.com/Thoseyearsbrian/GeoIP2-CN/main/LICENSE).
